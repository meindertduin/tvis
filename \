#include <sys/ioctl.h>
#include <termios.h>
#include <unistd.h>

#include "screen.h"

Screen::Screen() {
    m_bars_component = new BarsComponent{{0, 0, 0, 0}};
    set_window_size();
}

Screen::~Screen() {
    delete m_bars_component;
}

void Screen::render() {
    //m_bars_component->render();
    //m_terminal_writer.write_to_console();
}

void Screen::set_window_size() {
    struct winsize window_size;
    if (ioctl(STDOUT_FILENO, TIOCGWINSZ, &window_size) == -1) {
        // TODO handle error
        return;
    }

    m_window_data.height = window_size.ws_col;
    m_window_data.width = window_size.ws_row;

    printf("%d, %d\n", m_window_data.width, m_window_data.height);

    for(int i = 0; i < 74; i++) {
        printf("x");
    }
    printf("/n")
}

